<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cooking Mamas</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<header>
  <h1>Cooking Mamas</h1>
  <input type="text" id="search" placeholder="Search recipes...">
</header>

<main>
  <h2>Recipe Categories</h2>
  <div class="grid" id="categories-grid"></div>
  <div class="grid" id="search-results" style="display:none;"></div>
</main>

<footer>
  <p>&copy; 2025 Cooking Mamas</p>
</footer>

<script>
const categories = ["American","Vietnamese","Japanese","Korean","Chinese","Pickles","Misc"];
const grid = document.getElementById("categories-grid");
const searchResults = document.getElementById("search-results");
const searchInput = document.getElementById("search");

// Render categories
categories.forEach(cat => {
  const card = document.createElement("a");
  card.href = "#";
  card.className = "card category-card";
  card.innerHTML = `<h3>${cat}</h3>`;
  card.addEventListener("click", e => {
    e.preventDefault();
    localStorage.setItem("selectedCategory", cat);
    window.location.href = "recipes.html";
  });
  grid.appendChild(card);
});

// Handle search
searchInput.addEventListener("input", e => {
  const query = e.target.value.toLowerCase();

  if (!query) {
    grid.style.display = "grid";
    searchResults.style.display = "none";
    return;
  }

  fetch("recipes.json")
    .then(res => res.json())
    .then(data => {
      const filtered = data.filter(r => r.title.toLowerCase().includes(query));

      // Show results
      searchResults.innerHTML = "";
      filtered.forEach(recipe => {
        const card = document.createElement("div");
        card.className = "card";
        card.innerHTML = `
          <img src="images/${recipe.category.toLowerCase()}/${recipe.image}" alt="${recipe.title}">
          <h3>${recipe.title}</h3>
        `;
        card.addEventListener("click", () => {
          localStorage.setItem("selectedRecipe", JSON.stringify(recipe));
          window.location.href = "recipe-detail.html";
        });
        searchResults.appendChild(card);
      });

      // Toggle visibility
      grid.style.display = "none";
      searchResults.style.display = "grid";
    });
});
</script>

</body>
</html>
